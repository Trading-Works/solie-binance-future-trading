from recipe import standardize

target_symbols = standardize.get_basics()["target_symbols"]
acquire_ratio = 0.8 / len(target_symbols)  # 선택한 코인 개수에 맞게 배분

current_price = current_observed_data[str((symbol, "Close"))]
price_sma_one = current_indicators[str((symbol, "Price", "SMA One (#00BBFF)"))]
price_sma_two = current_indicators[str((symbol, "Price", "SMA Two (#FF6666)"))]

wallet_balance = account_state["wallet_balance"]
position_direction = account_state["positions"][symbol]["direction"]
position_margin = account_state["positions"][symbol]["margin"]

scribbles["remember_something"] = True  # 이렇게 기억해 두는 것도 가능

if position_direction == "none":
    if price_sma_one > price_sma_two:
        decision[symbol]["now_buy"] = {
            "margin": acquire_ratio * wallet_balance,
        }
    elif price_sma_one < price_sma_two:
        decision[symbol]["now_sell"] = {
            "margin": acquire_ratio * wallet_balance,
        }

elif position_direction == "long":
    if price_sma_one < price_sma_two:
        decision[symbol]["now_sell"] = {
            "margin": position_margin + acquire_ratio * wallet_balance,  # 뒤집기
        }

elif position_direction == "short":
    if price_sma_one > price_sma_two:
        decision[symbol]["now_buy"] = {
            "margin": position_margin + acquire_ratio * wallet_balance,  # 뒤집기
        }
